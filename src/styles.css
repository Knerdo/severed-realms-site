@tailwind base;
@tailwind components;
@tailwind utilities;

/* We are using Tailwind CSS via the CDN in index.html,
  so we don't strictly need much here.
  But this ensures the basic font and background
  defaults are set correctly just in case.
*/

body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  background-color: black; /* Matches your theme */
  color: white;
}

@layer components {
  /* --- Tome primitives (single source of truth) --- */
  .tome-divider {
    @apply h-px bg-stone-800/70 my-10;
  }

  .tome-navlink {
    @apply font-title text-xs tracking-[0.28em] uppercase text-stone-600 hover:text-stone-400 transition-colors;
  }

  .tome-card {
    @apply block border border-stone-900/70 bg-stone-950/20 hover:bg-stone-950/40 transition-colors px-5 py-4;
  }

  .tome-pill {
    @apply font-title text-[10px] tracking-[0.24em] uppercase px-2 py-1 border;
  }

  .tome-pill--active {
    @apply text-orange-200 border-orange-900/50 bg-orange-950/30;
  }

  .tome-pill--muted {
    @apply text-stone-400 border-stone-800/80 bg-black/20;
  }

  /* Rich text within Tome-framed pages (used by Grimoire + Chronicles) */
  .tome-content {
    @apply font-serif-text;
  }

  .tome-content :is(h1, h2, h3) {
    @apply font-title text-2xl md:text-3xl text-stone-100 mt-12 mb-6 tracking-wide;
    border-left-width: 0;
    padding-left: 0;
  }

  .tome-content :is(h4, h5) {
    @apply font-title text-xl md:text-2xl text-stone-100 mt-10 mb-5 tracking-wide;
    border-left-width: 0;
    padding-left: 0;
  }

  .tome-content h6 {
    @apply font-title text-lg md:text-xl text-stone-100 mt-8 mb-4 tracking-wide;
    border-left-width: 0;
    padding-left: 0;
  }

  .tome-content p {
    @apply my-6 leading-relaxed text-[1.05rem] md:text-lg text-stone-200/95;
  }

  .tome-content a {
    @apply text-stone-200 underline underline-offset-4 decoration-stone-700 hover:decoration-stone-400;
  }

  .tome-content :is(ul, ol) {
    @apply my-6 pl-6 space-y-2 text-[1.05rem] md:text-lg text-stone-200/95;
  }

  .tome-content ul {
    @apply list-disc;
  }

  .tome-content ol {
    @apply list-decimal;
  }

  .tome-content li {
    @apply leading-relaxed;
  }

  .tome-content blockquote {
    @apply my-8 border-l border-stone-700/70 pl-6 text-stone-200/90 italic;
  }

  .tome-content hr {
    @apply h-px bg-stone-800/70 my-10;
    border: 0;
  }

  .tome-content code {
    @apply px-1.5 py-0.5 rounded bg-stone-900/60 text-stone-100;
  }

  .tome-content pre code {
    @apply block p-4 rounded bg-stone-950 text-stone-100;
  }

  /* Navigation glassmorphism (Severed Realms / Tome aesthetic) */
  .tome-nav-glass {
    @apply bg-black/35 backdrop-blur-xl border-b border-stone-800/60;
    box-shadow:
      0 10px 30px rgba(0, 0, 0, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.04);
  }

  .tome-nav-glass::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: -1px;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      rgba(234, 88, 12, 0.22),
      transparent
    );
    opacity: 0.9;
    pointer-events: none;
  }

  .nav-interactive {
    @apply transition-transform duration-200 ease-out;
    transform: translateZ(0);
  }

  .nav-interactive:hover,
  .nav-interactive:focus-visible {
    transform: scale(1.05);
  }
}

@keyframes sigil-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-sigil-spin {
  animation: sigil-rotate 2.6s linear infinite;
}

/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;700;900&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500&display=swap');

.font-title { font-family: 'Cinzel', serif; }
.font-serif-text { font-family: 'Playfair Display', serif; }
.font-body { font-family: 'Inter', sans-serif; }

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #0c0a09; }
::-webkit-scrollbar-thumb { background: #7c2d12; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #c2410c; }

/* Animation Keyframes */
@keyframes fog-flow {
  0% { transform: translateX(0%); }
  100% { transform: translateX(-50%); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse-slow {
  0%, 100% { opacity: 1; filter: brightness(1.3); }
  50% { opacity: 0.6; filter: brightness(1); }
}

.animate-fog { animation: fog-flow 60s linear infinite; }
.animate-pulse-slow { animation: pulse-slow 4s ease-in-out infinite; }

.text-glow { text-shadow: 0 0 25px rgba(234, 88, 12, 0.8); }

.glass-panel {
  background: rgba(67, 20, 7, 0.4);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(124, 45, 18, 0.4);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
}

.hover-glow:hover {
  box-shadow: 0 0 15px rgba(234, 88, 12, 0.3);
  border-color: rgba(234, 88, 12, 0.6);
}

button:focus-visible,
a:focus-visible {
  outline: 2px solid rgb(234, 88, 12);
  outline-offset: 2px;
}

/* Reduced motion: disable non-essential animation globally */
@media (prefers-reduced-motion: reduce) {
  .animate-fog,
  .animate-pulse-slow {
    animation: none !important;
  }

  .nav-interactive:hover,
  .nav-interactive:focus-visible {
    transform: none !important;
  }

  .animate-sigil-spin {
    animation: none !important;
  }
}
